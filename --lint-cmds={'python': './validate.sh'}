import json
from datetime import datetime
from ollama import Client

client = Client(api_key="not-needed", base_url="http://localhost:8080/v1")

def generate_qa_pair(thought):
    messages = [
        {
            "role": "system",
            "content": "You are a helpful, brief, and friendly local AI assistant.",
        },
        {
            "role": "user",
            "content": thought,
        }
    ]
    
    response = client.chat_completion(
        model="mlx-community/Qwen2.5-Coder-7b",
        messages=messages
    )
    
    content = response['choices'][0]['message']['content']
    lines = content.split('\n')
    question = lines[0].strip()
    answer = '\n'.join(lines[1:]).strip()
    
    return {
        "Question": question,
        "Answer": answer
    }
